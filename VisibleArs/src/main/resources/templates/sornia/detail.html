<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>주문조회</title>
    <link rel="stylesheet" th:href="@{/sornia/css/font.css}" />
    <link rel="stylesheet" th:href="@{/sornia/css/reset.css}" />
    <link rel="stylesheet" th:href="@{/sornia/css/ui.css}" />
    <link rel="stylesheet" th:href="@{/sornia/css/common.css}" />
    <link rel="stylesheet" th:href="@{/sornia/css/order_detail.css}" />
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  </head>
  <body>
    <header class="page-header">
      <div class="left-area">
        <img src="/sornia/assets/ico_headphone_w.svg" alt="headphone" class="icon" />
        <span class="title">보이는 ARS</span>
      </div>
      <div class="right-area">
        <div class="button" onclick="handleClickClose()">
          <img src="/sornia/assets/ico_close_w.svg" alt="headphone" class="icon" />
          <span class="title">닫기</span>
        </div>
      </div>
    </header>
    <div class="page-navigation">
      <div class="button" onclick="handleClickBackward()">
        <img src="/sornia/assets/ico_backward.svg" alt="backward" class="icon" />
      </div>
      <div class="button" onclick="handleClickHome()">
        <img src="/sornia/assets/ico_home.svg" alt="backward" class="icon" />
      </div>
    </div>
    <div class="page-container">
      <div class="menu">
        <div class="menu-header">
          <p class="title">주문조회</p>
          <p class="description">주문하신 제품 상세내역입니다.</p>
        </div>
      </div>    
      <div class="content">
        <div class="ui-data-table">
          <table>
            <colgroup>
              <col width="65px" />
              <col width="*" />
            </colgroup>
            <tbody th:each="order: ${orderlist}">
              <tr>
                <th>상 품 명</th>
                <td th:text="${order.productName}"></td>
              </tr>
              <tr>
                <th>수 량</th>
                <td th:text="${order.quantity}"></td>
              </tr>
              <tr>
              <tr>
                <th>배 송 지</th>
                <td th:text="${order.receiverAddress}"></td>
              </tr>
              <tr>
              	<td style="text-align: center;" colspan="2"><br></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="inquiry">
          <p class="message">다른 문의사항이 있으신가요?</p>
          <a th:href="@{/sornia/inquiry(sabangNo=${sabangNo})}">
            <div class="ui-button primary">
              <span class="title">1:1 문의하기</span>
            </div>
          </a>
        </div>
      </div>
    </div>
    <!-- notice -->
    <div class="notice" id="notice">
      <p>3G, LTE, 5G 환경에서는 데이터 요금이 발생합니다.</p>
    </div>
    <!-- footer -->
    <div class="page-footer-navigation">
      <div class="controller">
        <div class="left-area">
          <div class="button">
            <img src="/sornia/assets/ico_headphone.svg" alt="call" class="icon" />
            <span class="title">상담원 연결</span>
          </div>
        </div>
        <div class="right-area">
          <div class="button">
            <img src="/sornia/assets/ico_phone.svg" alt="cancel" class="icon" />
            <span class="title">통화종료</span>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
	const urlParams = new URL(location.href).searchParams;
	const token = urlParams.get('token');
		  
    window.onload = function () {
      const scrollHeight = document.scrollingElement.scrollHeight;
      const noticeElement = document.querySelector('#notice');
      noticeElement.style.top = `${scrollHeight - 100}px`;
      fnArsSend();
    };

	function fnArsSend() {
		const param = {
			token: token,
			keycode:"kjkOcDy5cH2p5i+gQHXop1M+c8uSH64+7Q0Xy6b87KQ=",
			paging :"service03"
		}
		$.ajax({
			url: "https://pbx116138.smartcti.co.kr:9042/ServiceAPI/ViewARSHangup/index.html",
			data: param,
			dataType : 'jsonp',
			type: 'POST',
		}).done(function (data) {
			console.log(data)
		});
	}
	
    function handleClickClose() {
      // when clicked close icon.
    }

    function handleClickHome() {
      // when clicked home icon.
    }

    function handleClickBackward() {
      // when clicked backward icon.
      window.history.go(-1);
    }
  </script>
</html>
