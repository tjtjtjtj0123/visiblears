<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>메뉴</title>
	<link rel="stylesheet" th:href="@{/sornia/css/font.css}" />
	<link rel="stylesheet" th:href="@{/sornia/css/reset.css}" />
	<link rel="stylesheet" th:href="@{/sornia/css/ui.css}" />
	<link rel="stylesheet" th:href="@{/sornia/css/common.css}" />
	<link rel="stylesheet" th:href="@{/sornia/_custom/custom.css}" />
	<link rel="stylesheet" th:href="@{/sornia/css/menu.css}" />
</head>

<body>
	<header class="page-header">
		<div class="left-area">
			<img src="/sornia/assets/ico_headphone_w.svg" alt="headphone" class="icon" />
			<span class="title">보이는 ARS</span>
		</div>
		<div class="right-area">
			<div class="button" onclick="handleClickClose()">
				<img src="/sornia/assets/ico_close_w.svg" alt="headphone" class="icon" />
				<span class="title">닫기</span>
			</div>
		</div>
	</header>
	<div class="page-container">
		<div class="menu">
			<div class="menu-header">
				<img src="/sornia/_custom/ico_logo.svg" alt="logo" class="logo" />
				<p class="title">안녕하세요. 소르니아 입니다.<br />원하시는 서비스를 선택해주세요.</p>
			</div>
		</div>
		<div class="content">
			<div class="menu">
				<div class="ui-box-sub-button" onclick="handleToggleSubMenu(event, this)">
					<img src="/sornia/assets/ico_delivery.svg" alt="delivery" class="icon" />
					<div class="menu-name">
						<p class="name">배송</p>
						<img src="/sornia/assets/ico_more.svg" alt="more" class="icon" />
					</div>
					<!-- menu -->
					<div class="menu-modal">
						<div class="menu-list">
							<img src="/sornia/assets/ico_close_w.svg" alt="close" class="icon"
								onclick="handleToggleSubMenu(event, this)" />
							<div class="header">
								<p class="name">배송</p>
								<p class="description">원하시는 서비스를 선택해주세요.</p>
							</div>
							<div class="content">
								<ul>
									<a th:href="@{/sornia/detail(sabangNo=${sabangNo})}">
										<li>배송조회</li>
									</a>
									<a href="#">
										<li>배송변경</li>
									</a>
									<a href="#">
										<li>1:1 문의</li>
									</a>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="ui-box-sub-button" onclick="handleToggleSubMenu(event, this)">
					<img src="/sornia/assets/ico_exchange.svg" alt="exchange" class="icon" />
					<div class="menu-name">
						<p class="name">교환</p>
						<img src="/sornia/assets/ico_more.svg" alt="more" class="icon" />
					</div>
					<!-- menu -->
					<div class="menu-modal">
						<div class="menu-list">
							<img src="/sornia/assets/ico_close_w.svg" alt="close" class="icon"
								onclick="handleToggleSubMenu(event, this)" />
							<div class="header">
								<p class="name">교환</p>
								<p class="description">원하시는 서비스를 선택해주세요.</p>
							</div>
							<div class="content">
								<ul>
									<a href="#">
										<li>교환조회</li>
									</a>
									<a href="#">
										<li>교환변경</li>
									</a>
									<a href="#">
										<li>1:1 문의</li>
									</a>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="ui-box-sub-button" onclick="handleToggleSubMenu(event, this)">
					<img src="/sornia/assets/ico_return.svg" alt="return" class="icon" />
					<div class="menu-name">
						<p class="name">반품</p>
						<img src="/sornia/assets/ico_more.svg" alt="more" class="icon" />
					</div>
					<!-- menu -->
					<div class="menu-modal">
						<div class="menu-list">
							<img src="/sornia/assets/ico_close_w.svg" alt="close" class="icon"
								onclick="handleToggleSubMenu(event, this)" />
							<div class="header">
								<p class="name">반품</p>
								<p class="description">원하시는 서비스를 선택해주세요.</p>
							</div>
							<div class="content">
								<ul>
									<a href="#">
										<li>반품조회</li>
									</a>
									<a href="#">
										<li>반품변경</li>
									</a>
									<a href="#">
										<li>1:1 문의</li>
									</a>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="ui-box-sub-button" onclick="handleToggleSubMenu(event, this)">
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
						viewBox="0 0 145.59 145.59" class="icon">
						<defs>
							<style>
								.inquiry-2 {
									fill: url(#shadow);
								}

								.inquiry-3 {
									mask: url(#mask);
								}

								.inquiry-7 {
									fill: url(#gredient2);
								}

								.inquiry-8 {
									fill: url(#gredient3);
								}
							</style>
							<linearGradient id="gredient3" x1="100.58" y1="-15329.82" x2="222.12" y2="-15540.32"
								gradientTransform="translate(376.07 -14815.77) scale(1 -1)"
								gradientUnits="userSpaceOnUse">
								<stop offset="0" stop-color="#262626" />
								<stop offset=".31" stop-color="#262626" />
								<stop offset=".38" stop-color="#000" />
								<stop offset="1" stop-color="#000" />
							</linearGradient>
							<mask id="mask" y="-799.37" width="799.37" height="799.37" maskUnits="userSpaceOnUse">
								<rect class="inquiry-8" width="799.37" height="799.37" />
							</mask>
							<linearGradient id="gredient2" x1="100.58" y1="-15329.82" x2="222.12" y2="-15540.32"
								gradientTransform="translate(376.07 -14815.77) scale(1 -1)"
								gradientUnits="userSpaceOnUse">
								<stop offset="0" stop-color="#000" />
								<stop offset=".31" stop-color="#000" />
								<stop offset=".38" stop-color="#f7f9fc" />
								<stop offset="1" stop-color="#f7f9fc" />
							</linearGradient>
							<pattern id="shadow" x="0" y="0" width="799.37" height="799.37"
								patternTransform="translate(-1745.67 -626.87) scale(.41 -.41)"
								patternUnits="userSpaceOnUse" viewBox="0 0 799.37 799.37">
								<g>
									<rect class="inquiry-1" width="799.37" height="799.37" />
									<g class="inquiry-3">
										<rect class="inquiry-7" width="799.37" height="799.37" />
									</g>
								</g>
							</pattern>
						</defs>
						<g>
							<g>
								<circle class="inquiry-4" cx="72.79" cy="72.79" r="72.79" />
								<g>
									<path class="inquiry-5"
										d="M122.32,74.82l-4.24-2.15s-3.59,.43-6.7-.43c-1.86-.52-3.55-1.88-4.85-3.6v-25.88c0-3.73-2.02-6.77-4.84-8.41-.16-.1-1.8-1.16-4.9-2.59-2.7-1.24-5.97-1.27-8.91,.42l-45.3,25.92c-6.33,4.13-9.87,7.97-9.8,16.98v27.74c0,3.25,1.52,5.97,3.78,7.7,2.83,2.17,4.7,2.66,4.85,2.7,.36,.23,.74,.43,1.13,.61,2.7,1.23,5.96,1.26,8.89-.43l45.3-25.92c2.86-1.65,16.3,2.45,25.59-12.66Z" />
									<path class="inquiry-6"
										d="M118.08,72.67s-3.59,.43-6.7-.43c-1.86-.52-3.55-1.88-4.85-3.6v1.86c-.02,7.58,15.79,4.32,15.79,4.32l-4.24-2.15Z" />
									<path class="inquiry-5"
										d="M87.88,32.18l-45.3,25.92c-6.33,4.13-9.87,7.97-9.8,16.98v27.74c0,3.25,1.52,5.97,3.78,7.7,2.83,2.17,4.7,2.66,4.85,2.7-2.68-1.67-4.57-4.63-4.57-8.25v-31.38c0-7.01,3.74-9.85,9.81-13.35l45.3-25.92c3.25-1.88,6.91-1.64,9.75,.01-.15-.1-1.8-1.16-4.9-2.59-2.7-1.24-5.97-1.27-8.91,.42Z" />
									<path class="inquiry-2"
										d="M36.84,104.98v-31.38c0-7.01,3.74-9.85,9.81-13.35l45.3-25.92c3.25-1.88,6.91-1.64,9.75,.01-.15-.1-1.8-1.16-4.9-2.59-2.7-1.24-5.97-1.27-8.91,.42l-45.3,25.92c-6.33,4.13-9.87,7.97-9.8,16.98v27.74c0,3.25,1.52,5.97,3.78,7.7,2.83,2.17,4.7,2.66,4.85,2.7-2.68-1.67-4.57-4.63-4.57-8.25Z" />
									<path class="inquiry-4"
										d="M90.54,53.42c-14.56,8.41-22.26,12.84-36.82,21.25-2.63,1.52-2.63,5.46,0,3.94,14.56-8.41,22.26-12.84,36.82-21.25,2.63-1.52,2.63-5.46,0-3.94Z" />
									<path class="inquiry-4"
										d="M90.54,61.91c-14.56,8.41-22.26,12.84-36.82,21.25-2.63,1.52-2.63,5.46,0,3.94,14.56-8.41,22.26-12.84,36.82-21.25,2.63-1.52,2.63-5.46,0-3.94Z" />
									<path class="inquiry-4"
										d="M90.54,70.41c-14.56,8.41-22.26,12.84-36.82,21.25-2.63,1.52-2.63,5.46,0,3.94,14.56-8.41,22.26-12.84,36.82-21.25,2.63-1.52,2.63-5.46,0-3.94Z" />
								</g>
							</g>
						</g>
					</svg>
					<div class="menu-name">
						<p class="name">기타문의</p>
						<img src="/sornia/assets/ico_more.svg" alt="more" class="icon" />
					</div>
					<!-- menu -->
					<div class="menu-modal">
						<div class="menu-list">
							<img src="/sornia/assets/ico_close_w.svg" alt="close" class="icon"
								onclick="handleToggleSubMenu(event, this)" />
							<div class="header">
								<p class="name">기타문의</p>
								<p class="description">원하시는 서비스를 선택해주세요.</p>
							</div>
							<div class="content">
								<ul>
									<a href="#">
										<li>문의조회</li>
									</a>
									<a href="#">
										<li>문의변경</li>
									</a>
									<a href="#">
										<li>1:1 문의</li>
									</a>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- notice -->
	<div class="notice" id="notice">
		<p>3G, LTE, 5G 환경에서는 데이터 요금이 발생합니다.</p>
	</div>
	<!-- footer -->
	<div class="page-footer-navigation">
		<div class="controller">
			<div class="left-area">
				<div class="button" onclick="fnCallCRS()">
					<img src="/sornia/assets/ico_headphone.svg" alt="call" class="icon" />
					<span class="title">상담원 연결</span>
				</div>
			</div>
			<div class="right-area">
				<div class="button">
					<img src="/sornia/assets/ico_phone.svg" alt="cancel" class="icon" />
					<span class="title">통화종료</span>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	const urlParams = new URL(location.href).searchParams;
	const token = urlParams.get('token');

	window.onload = function () {
		const scrollHeight = document.scrollingElement.scrollHeight;
		const noticeElement = document.querySelector('#notice');
		noticeElement.style.top = `${scrollHeight - 100}px`;
		fnArsSend();
	};

	function fnCallCRS() {
		try {
			const param = {
				keycode: "kjkOcDy5cH2p5i+gQHXop1M+c8uSH64+7Q0Xy6b87KQ=",
				proc: "service00",
				token: token
			}

			// jQuery AJAX 요청
			$.ajax({
				url: "https://pbx116138.smartcti.co.kr:9042/ServiceAPI/ViewARS/",
				data: param,
				type: 'POST',
				timeout: 30000,
			}).done(function (data) {
				console.log(data)
			});
		} catch {

		}
	}
	function fnArsSend() {
		const param = {
			token: token,
			keycode: "kjkOcDy5cH2p5i+gQHXop1M+c8uSH64+7Q0Xy6b87KQ=",
			paging: "service03"
		}
		$.ajax({
			url: "https://pbx116138.smartcti.co.kr:9042/ServiceAPI/ViewARSHangup/index.html",
			data: param,
			dataType: 'jsonp',
			type: 'POST',
		}).done(function (data) {
			console.log(data)
		});
	}

	function handleClickClose() {
		// when clicked close icon.
	}

	function handleToggleSubMenu(event, target) {
		event.stopPropagation();

		if (
			target.className === 'icon' &&
			String(target.getAttribute('src')).includes('ico_close_w')
		) {
			target.parentElement.parentElement.classList.remove('visible');
		} else {
			for (let i = 0, length = target.children.length; i < length; ++i) {
				if (target.children[i].className === 'menu-modal') {
					target.children[i].classList.add('visible');
					break;
				}
			}
		}
	}
</script>

</html>